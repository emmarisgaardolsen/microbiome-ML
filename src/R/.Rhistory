pacman::p_load(curatedMetagenomicData,
tidyverse,
knitr,
rmdformats,
coop,
xtable)
knitr::opts_chunk$set(echo = TRUE)
# global options
options(max.print="75")
opts_chunk$set(fig.width=8,
fig.height=5,
fig.path='Figs/',
echo=TRUE,
warning=FALSE,
message=FALSE,
cache=TRUE,
prompt=FALSE,
tidy=TRUE)
opts_knit$set(width=75)
full_subset <-
filter(sampleMetadata,body_site == "stool" & age >= 18) %>%
select(where(~!all(is.na(.x))))  %>%   # columns of all NA values are dropped
returnSamples(dataType = "relative_abundance", # relative abundance tables (so values in one sample sum to 1 (apx))
rownames = "long") # row names are in long format
full_df <- as.data.frame(t(assay(full_subset))) %>%
rownames_to_column()
# change column 'rowname' to 'sample_id'
full_df <- full_df %>% rename(sample_id = rowname)
# save csv file
write.csv(full_df, "../../data/raw/full_subset_df.csv", row.names = TRUE)
